(()=>{var e={862:(e,t,s)=>{var r={"./back.jpg":635,"./major0.jpg":22,"./major1.jpg":951,"./major10.jpg":26,"./major11.jpg":353,"./major12.jpg":522,"./major13.jpg":90,"./major14.jpg":115,"./major15.jpg":664,"./major16.jpg":738,"./major17.jpg":6,"./major18.jpg":46,"./major19.jpg":313,"./major2.jpg":571,"./major20.jpg":53,"./major21.jpg":924,"./major3.jpg":802,"./major4.jpg":16,"./major5.jpg":521,"./major6.jpg":647,"./major7.jpg":210,"./major8.jpg":799,"./major9.jpg":587};function a(e){var t=n(e);return s(t)}function n(e){if(!s.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=n,e.exports=a,a.id=862},635:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/cards/back.jpg"},22:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/cards/major0.jpg"},951:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/cards/major1.jpg"},26:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/cards/major10.jpg"},353:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/cards/major11.jpg"},522:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/cards/major12.jpg"},90:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/cards/major13.jpg"},115:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/cards/major14.jpg"},664:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/cards/major15.jpg"},738:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/cards/major16.jpg"},6:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/cards/major17.jpg"},46:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/cards/major18.jpg"},313:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/cards/major19.jpg"},571:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/cards/major2.jpg"},53:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/cards/major20.jpg"},924:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/cards/major21.jpg"},802:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/cards/major3.jpg"},16:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/cards/major4.jpg"},521:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/cards/major5.jpg"},647:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/cards/major6.jpg"},210:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/cards/major7.jpg"},799:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/cards/major8.jpg"},587:(e,t,s)=>{"use strict";e.exports=s.p+"assets/images/cards/major9.jpg"}},t={};function s(r){var a=t[r];if(void 0!==a)return a.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,s),n.exports}s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.p="",(()=>{"use strict";const e=function(e){return e.keys().map(e)};const t=class{constructor(e="body"){this.appendToElement=e;const t=document.createElement("div");t.className="loading-bar";const s=document.createElement("span");s.textContent="Loading",t.appendChild(s);const r=document.createElement("div");r.className="animation-bar",t.appendChild(r);const a=document.createElement("div");a.className="animation-bar-background",t.lastChild.appendChild(a),this.loadingBar=t}preloadImages=e=>{let t=0;const s=(e,t,s)=>{this.loadingBar.children[0].textContent=`Loading ${e} - ${t} of ${s}`,this.loadingBar.lastChild.children[0].style.left="-"+Math.round(100-100*t/s)+"%"};return document.querySelector(this.appendToElement).prepend(this.loadingBar),Promise.all(e.map((r=>(e=>new Promise(((t,s)=>{const r=new Image;r.onload=()=>{let s=e.split("/").slice(-1).toString().match("[0-9]+");s=null===s?-1:parseInt(s.join("")),t({image:r,index:s,path:e,status:"ok"})},r.onerror=()=>s({path:e,status:"error"}),r.src=e})))(r).then((r=>(s(r.path.split("/").slice(-1),++t,e.length),Promise.resolve({image:r.image,index:r.index})))).catch((e=>console.log(e.message)))))).then((e=>(this.loadingBar.children[0].textContent="Loading Finished",e.sort(((e,t)=>e.index>t.index?1:-1)),new Promise((t=>{setTimeout((()=>{document.querySelector(this.appendToElement).removeChild(this.loadingBar),t({imageElements:e,target:this.appendToElement})}),1e3)}))))).catch((()=>console.log("error")))}};const r=function(e){for(let t=e.length-1;t>0;t--){let s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}};const a=class{constructor(e,t,{numberOfCards:s=22,numberOfEmptySlots:r=5,cardAnimationType:a="flip-direct",btnNewGameExists:n=!0}={}){this.cardImageElements=e,this.appendToElement=t,this.numberOfCards=s,this.numberOfEmptySlots=r,this.cardAnimationType=a,this.btnNewGameExists=n,this._emptySlots=Array(this.numberOfEmptySlots).fill(!1),this._animationInProgress=!1,this.chosenCards=[];const o=document.querySelector(t),i=document.createElement("div");i.className="tarot-game-container";const l=document.createElement("h3");l.textContent=`Choose ${this.numberOfEmptySlots} cards`,i.appendChild(l);const d=document.createElement("div");d.id="cards-container",i.appendChild(d),this._createCardsIntoContainer(d);const m=document.createElement("h3");m.textContent="Your result",i.appendChild(m);const c=document.createElement("div");c.id="chosen-cards-container",i.appendChild(c);for(let e=0;e<r;e++){const t=document.createElement("div");t.className="empty-slot",t.setAttribute("data-order",e),c.appendChild(t)}o.prepend(i),this.updateCardGameView().then((()=>{this._addEventListeners()}))}_createCardsIntoContainer(e){const t=this._createRandomizedValueArray(this.numberOfCards);for(let s=0;s<this.numberOfCards;s++){const r=document.createElement("div");r.className="card",r.setAttribute("data-order",s),r.setAttribute("data-value",t[s]),e.appendChild(r);const a=this.cardImageElements[0].image.cloneNode();r.appendChild(a),r.firstChild.className="image-responsive"}}_addEventListeners(){const e=document.querySelector(this.appendToElement+" .tarot-game-container"),t=document.querySelectorAll(this.appendToElement+" .card"),s=document.querySelectorAll(this.appendToElement+" .empty-slot");for(const e of s)e.style.cursor="pointer";for(const e of t)e.style.cursor="pointer";this.numberOfEmptySlots=s.length,e.addEventListener("click",this._clickCardHandler),e.addEventListener("dblclick",this._clickCardHandler)}updateCardGameView(){const e=document.querySelectorAll(this.appendToElement+" .card"),t=document.querySelectorAll(this.appendToElement+" .empty-slot");return this._drawHorizontalCollectedElements(t).then((()=>this._drawHorizontalCollectedElements(e,!0)))}_createRandomizedValueArray(e){const t=[];for(let s=0;s<e;s++)t.push(s);return r(t),t}_checkAnimationEnd(e,t,s,r){return e.animate(t,s),Promise.all(e.getAnimations({subtree:!0}).map((e=>e.finished))).then((e=>Promise.resolve({element:e[0].effect.target,target:r})))}_clickCardHandler=e=>{if(this._animationInProgress||!("card"===e.target.className||"IMG"===e.target.tagName&&"card"===e.target.parentElement.className||"empty-slot"===e.target.className&&0===e.target.children.length))return;if(0===this.numberOfEmptySlots)return;let t,s;switch(!0){case"card"===e.target.className:case"IMG"===e.target.tagName:t=this._getElementNode(e.target),s=this._getTargetNode();break;case"empty-slot"===e.target.className:t=this._getRandomCard(),s=this._getTargetNode(e.target)}void 0!==t&&void 0!==s&&(this.numberOfEmptySlots--,this._emptySlots[s.dataset.order]=!0,this._animateCard(t,s).then((e=>(this._checkForEndGame(),Promise.resolve(e)))))};_checkForEndGame(){0===this.numberOfEmptySlots&&this._showButtons()}_getElementNode(e){return"IMG"===e.tagName?e.parentElement:e}_getTargetNode(e=undefined){const t=document.querySelectorAll(this.appendToElement+" .empty-slot");if(void 0===e)for(let e=0;e<this._emptySlots.length;e++)if(!this._emptySlots[e])return t[e];if(!this._emptySlots[e.dataset.order])return e}_getRandomCard(){const e=document.querySelectorAll(this.appendToElement+" .card");return e[Math.floor(Math.random()*(e.length+1))]}_animateCard(e,t,s=this.cardAnimationType){switch(s){case"flip-direct":return e.classList.remove("card"),e.classList.add("chosen-card"),e.style.cursor="default",this.chosenCards.push(e.dataset.value),t.style.zIndex=1,t.style.cursor="default",this._animationMoveToTarget(e,t).then((e=>this._animationFlipCard(e.element,e.target).then((e=>(e.element.parentElement.style.zIndex=0,Promise.resolve(e.element))))));case"flip-center":return e.classList.remove("card"),e.classList.add("chosen-card"),e.style.cursor="default",this.chosenCards.push(e.dataset.value),t.style.zIndex=1,t.style.cursor="default",this._animationMoveToCenter(e,t).then((e=>this._animationFlipCard(e.element,e.target).then((e=>this._animationMoveToTarget(e.element,e.target).then((e=>(e.element.parentElement.style.zIndex=0,Promise.resolve(e.element))))))));case"move-to-deck":return this._animationMoveToDeck(e,t)}}_animationMoveToCenter(e,t){const s=document.querySelector(this.appendToElement+" .tarot-game-container"),r=e.getBoundingClientRect(),a=s.getBoundingClientRect(),n=a.width/2-r.width/2,o=a.height/2-r.height/2,i=[{left:e.style.left,top:e.style.top},{left:n+"px",top:o+"px"}];return s.appendChild(e),this._checkAnimationEnd(e,i,{easing:"cubic-bezier(0, 1, 1, 1)",duration:500,fill:"forwards"},t).then((e=>Promise.resolve({element:e.element,target:e.target})))}_animationMoveToTarget(e,t){const s=e.getBoundingClientRect(),r=t.getBoundingClientRect(),a=window.getComputedStyle(t),n=[{left:s.left-r.left+"px",top:s.top-r.top+"px"},{left:0-parseInt(a.getPropertyValue("border-left-width"))+"px",top:0-parseInt(a.getPropertyValue("border-top-width"))+"px"}];return t.appendChild(e),this._checkAnimationEnd(e,n,{easing:"cubic-bezier(0, 1, 1, 1)",duration:500,fill:"forwards"},t).then((e=>Promise.resolve({element:e.element,target:e.target})))}_animationFlipCard(e,t){const s={easing:"cubic-bezier(0, 1, 1, 1)",duration:300,fill:"forwards"};return this._checkAnimationEnd(e,[{transform:"rotateY(0deg)"},{transform:"rotateY(90deg)"}],s,t).then((t=>{const r=this.cardImageElements[parseInt(e.dataset.value)+1].image.cloneNode();t.element.children[0].remove(),t.element.appendChild(r),t.element.firstChild.className="image-responsive";return this._checkAnimationEnd(t.element,[{transform:"rotateY(90deg)"},{transform:"rotateY(0deg)"}],s,t.target).then((e=>Promise.resolve({element:e.element,target:e.target})))}))}_animationFlipCardReverse(e,t){const s={easing:"cubic-bezier(0, 1, 1, 1)",duration:300,fill:"forwards"};return this._checkAnimationEnd(e,[{transform:"rotateY(0deg)"},{transform:"rotateY(90deg)"}],s,t).then((e=>{const t=this.cardImageElements[0].image.cloneNode();e.element.children[0].remove(),e.element.appendChild(t),e.element.firstChild.className="image-responsive";return this._checkAnimationEnd(e.element,[{transform:"rotateY(90deg)"},{transform:"rotateY(0deg)"}],s,e.target).then((e=>Promise.resolve({element:e.element,target:e.target})))}))}_animationMoveToDeck(e,t){const s=e.getBoundingClientRect().left-t.getBoundingClientRect().left,r=[{left:s+"px",top:e.getBoundingClientRect().top-t.getBoundingClientRect().top+"px"},{left:s+"px",top:0-parseInt(window.getComputedStyle(t).getPropertyValue("border-top-width"))+"px"}];return e.classList.remove("chosen-card"),e.classList.add("card"),this.chosenCards.pop(),t.style.zIndex=1,t.appendChild(e),this._checkAnimationEnd(e,r,{easing:"cubic-bezier(0, 1, 1, 1)",duration:500,fill:"forwards"},t).then((e=>Promise.resolve({element:e.element,target:e.target})))}_drawHorizontalCollectedElements(e,t=!1){this._animationInProgress=!0;const s=e[0].parentElement;s.style.width="100%";let r=s.offsetWidth;const a=e[0].offsetWidth,n=a*e.length+15*(e.length-1);if(n<=r?(r=n,s.style.width=n+"px",s.style.marginLeft="auto",s.style.marginRight="auto"):s.style.width=r+"px",!t){for(let t=0;t<e.length;t++){const s=(r-a)/(e.length-1)*t;e[t].style.left=s+"px"}return Promise.resolve(1)}return Promise.all(Array.from(e).map(((t,s)=>{const n=[{left:"0px"},{left:(r-a)/(e.length-1)*s+"px"}],o={easing:"cubic-bezier(0, 1, 1, 1)",duration:50*s,fill:"forwards"};return this._checkAnimationEnd(t,n,o)}))).then((()=>{this._animationInProgress=!1}))}_showButtons(){document.querySelector(this.appendToElement+" .end-game").style.display="block",this.btnNewGameExists&&(document.querySelector(this.appendToElement+" .begin-new-game").style.display="block")}newGame(){document.querySelector(this.appendToElement+" .end-game").style.display="none",document.querySelector(this.appendToElement+" .begin-new-game").style.display="none";const e=document.querySelector(this.appendToElement+" #cards-container"),t=document.querySelectorAll(this.appendToElement+" .empty-slot .chosen-card");Promise.all(Array.from(t).map((t=>this._animateCard(t,e,"move-to-deck")))).then((e=>{Promise.all(e.map((e=>this._animationFlipCardReverse(e.element,e.target)))).then((e=>{const t=document.querySelector(this.appendToElement).children[0].children[1];t.innerHTML="",this._createCardsIntoContainer(t);const s=document.querySelectorAll(this.appendToElement+" .card");return this._drawHorizontalCollectedElements(s,!0).then((()=>{const e=document.querySelectorAll(this.appendToElement+" .card"),t=document.querySelectorAll(this.appendToElement+" .empty-slot");for(const e of t)e.style.cursor="pointer";for(const t of e)t.style.cursor="pointer";e[0].parentElement.style.zIndex=0,this.numberOfEmptySlots=t.length,this._emptySlots=Array(this.numberOfEmptySlots).fill(!1)}))}))}))}};let n=null;window.addEventListener("DOMContentLoaded",(r=>{const o=e(s(862));let i=new t("#tarot-game");i.preloadImages(o).then((e=>{i=void 0,n=new a(e.imageElements,e.target,{numberOfCards:e.imageElements.length-1,numberOfEmptySlots:5,cardAnimationType:"flip-direct",btnNewGameExists:!0})})),document.querySelector("#tarot-game").addEventListener("click",(e=>{e.target.classList.contains("btnSubmit")&&console.log(n.chosenCards),e.target.classList.contains("btnShuffle")&&n.newGame()}))})),window.addEventListener("resize",(e=>{n instanceof a&&n.updateCardGameView()}))})()})();