(()=>{var e={862:(e,t,a)=>{var s={"./back.jpg":635,"./major0.jpg":22,"./major1.jpg":951,"./major10.jpg":26,"./major11.jpg":353,"./major12.jpg":522,"./major13.jpg":90,"./major14.jpg":115,"./major15.jpg":664,"./major16.jpg":738,"./major17.jpg":6,"./major18.jpg":46,"./major19.jpg":313,"./major2.jpg":571,"./major20.jpg":53,"./major21.jpg":924,"./major3.jpg":802,"./major4.jpg":16,"./major5.jpg":521,"./major6.jpg":647,"./major7.jpg":210,"./major8.jpg":799,"./major9.jpg":587};function r(e){var t=n(e);return a(t)}function n(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}r.keys=function(){return Object.keys(s)},r.resolve=n,e.exports=r,r.id=862},635:(e,t,a)=>{"use strict";e.exports=a.p+"assets/images/cards/back.jpg"},22:(e,t,a)=>{"use strict";e.exports=a.p+"assets/images/cards/major0.jpg"},951:(e,t,a)=>{"use strict";e.exports=a.p+"assets/images/cards/major1.jpg"},26:(e,t,a)=>{"use strict";e.exports=a.p+"assets/images/cards/major10.jpg"},353:(e,t,a)=>{"use strict";e.exports=a.p+"assets/images/cards/major11.jpg"},522:(e,t,a)=>{"use strict";e.exports=a.p+"assets/images/cards/major12.jpg"},90:(e,t,a)=>{"use strict";e.exports=a.p+"assets/images/cards/major13.jpg"},115:(e,t,a)=>{"use strict";e.exports=a.p+"assets/images/cards/major14.jpg"},664:(e,t,a)=>{"use strict";e.exports=a.p+"assets/images/cards/major15.jpg"},738:(e,t,a)=>{"use strict";e.exports=a.p+"assets/images/cards/major16.jpg"},6:(e,t,a)=>{"use strict";e.exports=a.p+"assets/images/cards/major17.jpg"},46:(e,t,a)=>{"use strict";e.exports=a.p+"assets/images/cards/major18.jpg"},313:(e,t,a)=>{"use strict";e.exports=a.p+"assets/images/cards/major19.jpg"},571:(e,t,a)=>{"use strict";e.exports=a.p+"assets/images/cards/major2.jpg"},53:(e,t,a)=>{"use strict";e.exports=a.p+"assets/images/cards/major20.jpg"},924:(e,t,a)=>{"use strict";e.exports=a.p+"assets/images/cards/major21.jpg"},802:(e,t,a)=>{"use strict";e.exports=a.p+"assets/images/cards/major3.jpg"},16:(e,t,a)=>{"use strict";e.exports=a.p+"assets/images/cards/major4.jpg"},521:(e,t,a)=>{"use strict";e.exports=a.p+"assets/images/cards/major5.jpg"},647:(e,t,a)=>{"use strict";e.exports=a.p+"assets/images/cards/major6.jpg"},210:(e,t,a)=>{"use strict";e.exports=a.p+"assets/images/cards/major7.jpg"},799:(e,t,a)=>{"use strict";e.exports=a.p+"assets/images/cards/major8.jpg"},587:(e,t,a)=>{"use strict";e.exports=a.p+"assets/images/cards/major9.jpg"}},t={};function a(s){var r=t[s];if(void 0!==r)return r.exports;var n=t[s]={exports:{}};return e[s](n,n.exports,a),n.exports}a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.p="",(()=>{"use strict";const e=function(e){return e.keys().map(e)};const t=class{constructor(e="body"){this.appendToElement=e;const t=document.createElement("div");t.className="loading-bar";const a=document.createElement("span");a.textContent="Loading",t.appendChild(a);const s=document.createElement("div");s.className="animation-bar",t.appendChild(s);const r=document.createElement("div");r.className="animation-bar-background",t.lastChild.appendChild(r),this.loadingBar=t}preloadImages=async e=>{let t=0;const a=(e,t,a)=>{this.loadingBar.children[0].textContent=`Loading ${e} - ${t} of ${a}`,this.loadingBar.lastChild.children[0].style.left="-"+Math.round(100-100*t/a)+"%"};document.querySelector(this.appendToElement).prepend(this.loadingBar);try{const s=await Promise.all(e.map((s=>{return(r=s,new Promise(((e,t)=>{const a=new Image;a.onload=()=>{let t=r.split("/").slice(-1).toString().match("[0-9]+");t=null===t?-1:parseInt(t.join("")),e({image:a,index:t,path:r,status:"ok"})},a.onerror=()=>t({path:r,status:"error"}),a.src=r}))).then((s=>(a(s.path.split("/").slice(-1),++t,e.length),Promise.resolve({image:s.image,index:s.index})))).catch((e=>console.log(e.message)));var r})));return this.loadingBar.children[0].textContent="Loading Finished",s.sort(((e,t)=>e.index>t.index?1:-1)),await new Promise((e=>{setTimeout((()=>{document.querySelector(this.appendToElement).removeChild(this.loadingBar),e({imageElements:s,target:this.appendToElement})}),1e3)}))}catch{return console.log("error")}}};const s=function(e){for(let t=e.length-1;t>0;t--){let a=Math.floor(Math.random()*(t+1));[e[t],e[a]]=[e[a],e[t]]}};const r=class{constructor(e,t,{numberOfCards:a=22,numberOfEmptySlots:s=5,cardAnimationType:r="flip-direct",btnNewGameExists:n=!0}={}){this.cardImageElements=e,this.appendToElement=t,this.numberOfCards=a,this.numberOfEmptySlots=s,this.cardAnimationType=r,this.btnNewGameExists=n,this._emptySlots=Array(this.numberOfEmptySlots).fill(!1),this._animationInProgress=!1,this.chosenCards=[];const o=document.querySelector(t),i=document.createElement("div");i.className="tarot-game-container";const l=document.createElement("h3");l.textContent=`Choose ${this.numberOfEmptySlots} cards`,i.appendChild(l);const c=document.createElement("div");c.id="cards-container",i.appendChild(c),this._createCardsIntoContainer(c);const d=document.createElement("h3");d.textContent="Your result",i.appendChild(d);const m=document.createElement("div");m.id="chosen-cards-container",i.appendChild(m);for(let e=0;e<s;e++){const t=document.createElement("div");t.className="empty-slot",t.setAttribute("data-order",e),m.appendChild(t)}o.prepend(i),this.updateCardGameView().then((()=>{this._addEventListeners()}))}_createCardsIntoContainer(e){const t=this._createRandomizedValueArray(this.numberOfCards);for(let a=0;a<this.numberOfCards;a++){const s=document.createElement("div");s.className="card",s.setAttribute("data-order",a),s.setAttribute("data-value",t[a]),e.appendChild(s);const r=this.cardImageElements[0].image.cloneNode();s.appendChild(r),s.firstChild.className="image-responsive"}}_addEventListeners(){const e=document.querySelector(this.appendToElement+" .tarot-game-container"),t=document.querySelectorAll(this.appendToElement+" .card"),a=document.querySelectorAll(this.appendToElement+" .empty-slot");for(const e of a)e.style.cursor="pointer";for(const e of t)e.style.cursor="pointer";this.numberOfEmptySlots=a.length,e.addEventListener("click",this._clickCardHandler),e.addEventListener("dblclick",this._clickCardHandler)}async updateCardGameView(){const e=document.querySelectorAll(this.appendToElement+" .card"),t=document.querySelectorAll(this.appendToElement+" .empty-slot");return await this._drawHorizontalCollectedElements(t),await this._drawHorizontalCollectedElements(e,!0)}_createRandomizedValueArray(e){const t=[];for(let a=0;a<e;a++)t.push(a);return s(t),t}async _checkAnimationEnd(e,t,a,s){e.animate(t,a);const r=await Promise.all(e.getAnimations({subtree:!0}).map((e=>e.finished)));return await Promise.resolve({element:r[0].effect.target,target:s})}_clickCardHandler=e=>{if(this._animationInProgress||!("card"===e.target.className||"IMG"===e.target.tagName&&"card"===e.target.parentElement.className||"empty-slot"===e.target.className&&0===e.target.children.length))return;if(0===this.numberOfEmptySlots)return;let t,a;switch(!0){case"card"===e.target.className:case"IMG"===e.target.tagName:t=this._getElementNode(e.target),a=this._getTargetNode();break;case"empty-slot"===e.target.className:t=this._getRandomCard(),a=this._getTargetNode(e.target)}void 0!==t&&void 0!==a&&(this.numberOfEmptySlots--,this._emptySlots[a.dataset.order]=!0,this._animateCard(t,a).then((e=>(this._checkForEndGame(),Promise.resolve(e)))))};_checkForEndGame(){0===this.numberOfEmptySlots&&this._showButtons()}_getElementNode(e){return"IMG"===e.tagName?e.parentElement:e}_getTargetNode(e=undefined){const t=document.querySelectorAll(this.appendToElement+" .empty-slot");if(void 0===e)for(let e=0;e<this._emptySlots.length;e++)if(!this._emptySlots[e])return t[e];if(!this._emptySlots[e.dataset.order])return e}_getRandomCard(){const e=document.querySelectorAll(this.appendToElement+" .card");return e[Math.floor(Math.random()*(e.length+1))]}async _animateCard(e,t,a=this.cardAnimationType){switch(a){case"flip-direct":return e.classList.remove("card"),e.classList.add("chosen-card"),e.style.cursor="default",this.chosenCards.push(e.dataset.value),t.style.zIndex=1,t.style.cursor="default",await this._animationMoveToTarget(e,t).then((async e=>{const t=await this._animationFlipCard(e.element,e.target);return t.element.parentElement.style.zIndex=0,await Promise.resolve(t.element)}));case"flip-center":return e.classList.remove("card"),e.classList.add("chosen-card"),e.style.cursor="default",this.chosenCards.push(e.dataset.value),t.style.zIndex=1,t.style.cursor="default",await this._animationMoveToCenter(e,t).then((async e=>{const t=await this._animationFlipCard(e.element,e.target),a=await this._animationMoveToTarget(t.element,t.target);return a.element.parentElement.style.zIndex=0,await Promise.resolve(a.element)}));case"move-to-deck":return await this._animationMoveToDeck(e,t)}}async _animationMoveToCenter(e,t){const a=document.querySelector(this.appendToElement+" .tarot-game-container"),s=e.getBoundingClientRect(),r=a.getBoundingClientRect(),n=r.width/2-s.width/2,o=r.height/2-s.height/2,i=[{left:e.style.left,top:e.style.top},{left:n+"px",top:o+"px"}];a.appendChild(e);const l=await this._checkAnimationEnd(e,i,{easing:"cubic-bezier(0, 1, 1, 1)",duration:500,fill:"forwards"},t);return await Promise.resolve({element:l.element,target:l.target})}async _animationMoveToTarget(e,t){const a=e.getBoundingClientRect(),s=t.getBoundingClientRect(),r=window.getComputedStyle(t),n=[{left:a.left-s.left+"px",top:a.top-s.top+"px"},{left:0-parseInt(r.getPropertyValue("border-left-width"))+"px",top:0-parseInt(r.getPropertyValue("border-top-width"))+"px"}];t.appendChild(e);const o=await this._checkAnimationEnd(e,n,{easing:"cubic-bezier(0, 1, 1, 1)",duration:500,fill:"forwards"},t);return await Promise.resolve({element:o.element,target:o.target})}async _animationFlipCard(e,t){const a={easing:"cubic-bezier(0, 1, 1, 1)",duration:300,fill:"forwards"},s=await this._checkAnimationEnd(e,[{transform:"rotateY(0deg)"},{transform:"rotateY(90deg)"}],a,t),r=this.cardImageElements[parseInt(e.dataset.value)+1].image.cloneNode();s.element.children[0].remove(),s.element.appendChild(r),s.element.firstChild.className="image-responsive";const n=await this._checkAnimationEnd(s.element,[{transform:"rotateY(90deg)"},{transform:"rotateY(0deg)"}],a,s.target);return await Promise.resolve({element:n.element,target:n.target})}async _animationFlipCardReverse(e,t){const a={easing:"cubic-bezier(0, 1, 1, 1)",duration:300,fill:"forwards"},s=await this._checkAnimationEnd(e,[{transform:"rotateY(0deg)"},{transform:"rotateY(90deg)"}],a,t),r=this.cardImageElements[0].image.cloneNode();s.element.children[0].remove(),s.element.appendChild(r),s.element.firstChild.className="image-responsive";const n=await this._checkAnimationEnd(s.element,[{transform:"rotateY(90deg)"},{transform:"rotateY(0deg)"}],a,s.target);return await Promise.resolve({element:n.element,target:n.target})}async _animationMoveToDeck(e,t){const a=e.getBoundingClientRect().left-t.getBoundingClientRect().left,s=[{left:a+"px",top:e.getBoundingClientRect().top-t.getBoundingClientRect().top+"px"},{left:a+"px",top:0-parseInt(window.getComputedStyle(t).getPropertyValue("border-top-width"))+"px"}];e.classList.remove("chosen-card"),e.classList.add("card"),this.chosenCards.pop(),t.style.zIndex=1,t.appendChild(e);const r=await this._checkAnimationEnd(e,s,{easing:"cubic-bezier(0, 1, 1, 1)",duration:500,fill:"forwards"},t);return await Promise.resolve({element:r.element,target:r.target})}async _drawHorizontalCollectedElements(e,t=!1){this._animationInProgress=!0;const a=e[0].parentElement;a.style.width="100%";let s=a.offsetWidth;const r=e[0].offsetWidth,n=r*e.length+15*(e.length-1);if(n<=s?(s=n,a.style.width=n+"px",a.style.marginLeft="auto",a.style.marginRight="auto"):a.style.width=s+"px",!t){for(let t=0;t<e.length;t++){const a=(s-r)/(e.length-1)*t;e[t].style.left=a+"px"}return Promise.resolve(1)}await Promise.all(Array.from(e).map(((t,a)=>{const n=[{left:"0px"},{left:(s-r)/(e.length-1)*a+"px"}],o={easing:"cubic-bezier(0, 1, 1, 1)",duration:50*a,fill:"forwards"};return this._checkAnimationEnd(t,n,o)}))),this._animationInProgress=!1}_showButtons(){document.querySelector(this.appendToElement+" .end-game").style.display="block",this.btnNewGameExists&&(document.querySelector(this.appendToElement+" .begin-new-game").style.display="block")}newGame(){document.querySelector(this.appendToElement+" .end-game").style.display="none",document.querySelector(this.appendToElement+" .begin-new-game").style.display="none";const e=document.querySelector(this.appendToElement+" #cards-container"),t=document.querySelectorAll(this.appendToElement+" .empty-slot .chosen-card");Promise.all(Array.from(t).map((t=>this._animateCard(t,e,"move-to-deck")))).then((e=>{Promise.all(e.map((e=>this._animationFlipCardReverse(e.element,e.target)))).then((async e=>{const t=document.querySelector(this.appendToElement).children[0].children[1];t.innerHTML="",this._createCardsIntoContainer(t);const a=document.querySelectorAll(this.appendToElement+" .card");await this._drawHorizontalCollectedElements(a,!0);const s=document.querySelectorAll(this.appendToElement+" .card"),r=document.querySelectorAll(this.appendToElement+" .empty-slot");for(const e of r)e.style.cursor="pointer";for(const e of s)e.style.cursor="pointer";s[0].parentElement.style.zIndex=0,this.numberOfEmptySlots=r.length,this._emptySlots=Array(this.numberOfEmptySlots).fill(!1)}))}))}};let n=null;window.addEventListener("DOMContentLoaded",(s=>{const o=e(a(862));let i=new t("#tarot-game");i.preloadImages(o).then((e=>{i=void 0,n=new r(e.imageElements,e.target,{numberOfCards:e.imageElements.length-1,numberOfEmptySlots:5,cardAnimationType:"flip-direct",btnNewGameExists:!0})})),document.querySelector("#tarot-game").addEventListener("click",(e=>{e.target.classList.contains("btnSubmit")&&console.log(n.chosenCards),e.target.classList.contains("btnShuffle")&&n.newGame()}))})),window.addEventListener("resize",(e=>{n instanceof r&&n.updateCardGameView()}))})()})();